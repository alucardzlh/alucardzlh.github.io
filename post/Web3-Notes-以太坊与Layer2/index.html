<!DOCTYPE html> <html lang="en"> <head><meta charset="UTF-8"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Alucard’s blog"><meta name="msapplication-TileColor" content="#000000"><meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><meta name="description" content=""><link rel="icon" href="/favicon.ico"><title>Web3 Notes 以太坊与Layer2 | Alucard’s blog</title><link rel="stylesheet" href="/_astro/_page_.CxqF2WSK.css">
<style>.outlines a[data-anchor-tag=H1]{margin-left:0}.outlines a[data-anchor-tag=H2]{margin-left:12px}.outlines a[data-anchor-tag=H3]{margin-left:24px}.outlines a[data-anchor-tag=H4]{margin-left:36px}.outlines a[data-anchor-tag=H5]{margin-left:48px}.outlines a[data-anchor-tag=H6]{margin-left:60px}
._tabset_selm3_1 ._tab-panel_selm3_1{display:none}._tabset_selm3_1 ._tab-panels_selm3_4{display:flex}._tabset_selm3_1 input[data-tab-name=direct]{display:none}._tabset_selm3_1 input[data-tab-name=direct]:checked~._tab-panels_selm3_4 ._tab-panel_selm3_1[data-tab-name=direct]{display:block}._tabset_selm3_1 input[data-tab-name=direct]:checked~._tab-labels_selm3_13 label[data-tab-name=direct]{border-bottom:2px solid red}._tabset_selm3_1 input[data-tab-name=app]{display:none}._tabset_selm3_1 input[data-tab-name=app]:checked~._tab-panels_selm3_4 ._tab-panel_selm3_1[data-tab-name=app]{display:block}._tabset_selm3_1 input[data-tab-name=app]:checked~._tab-labels_selm3_13 label[data-tab-name=app]{border-bottom:2px solid red}
</style>
<link rel="stylesheet" href="/_astro/_page_.BIc4xYU2.css">
<link rel="stylesheet" href="/_astro/_id_.Dle6usZr.css"><script type="module" src="/_astro/hoisted.DyI5eWYx.js"></script></head> <body class="text-text bg-bg"> <header class="flex justify-between items-center p-2 gap-2 h-10"> <a href="/" class="text-button text-lg" aria-label="homepage"> <div class="i-ri:menu-4-fill"></div> </a> <div class="flex gap-2 items-center header-operations">   <div id="auth"></div> </div> </header>  <main> <div class="content"> <div class="w-full flex gap-2 pb-2"> <a href="/tag/Web3" class="rounded hover:bg-gray-200 dark:hover:bg-modal px-3 py-1 cursor-pointer">
#Web3 </a> </div> <div class="ud-root read-only flex-1"><h1 level="1" id="Web3-Notes-以太坊与Layer2">Web3 Notes 以太坊与Layer2</h1><ol><li><p>并不缺好的idea，但是赛道崛(链游、DeFi、NFT)以太交易严重拥堵高gas所以需要升级</p></li><li><p>Layer2就是通过协议把交易转到线下，线上同步结果</p></li><li><p>业界的认定Layer2必须继承Layer1的安全性</p></li><li><p>侧链不属于Layer2</p></li><li><p>策略应该独立运行，独立的共识协议</p></li><li><p>Rollups ：交易捆绑打包上传以太</p></li><li><p>Layer1：以太主链上发布的区块有gas Limit限制</p></li></ol><p></p><h1 level="1" id="Rollups">Rollups:</h1><ol><li><p>在以太上部署智能合约记录状态，包括账户的状态交易的状态（默克尔树）</p></li><li><p>交易的计算在链下执行，交易计算会改变账户状态信息和State Root Hash，但是更新并不需要实时发布，而是交易数据+状态更新打包后发布以完成状态转移确认。大大提高效率</p></li><li><p>集成以太坊的安全性同时，把tps 从10几提高到成百上千。</p></li><li><p>交易放在CallData中，solidity中以CallData的形式传递的参数是不会被解析的，也不会被执行，可以理解成solidity只把它当成字节存储。</p></li><li><p>也有一种方案把大部分CallData放在链下，提高性能，但是牺牲安全性。</p></li><li><p>为了解决链下状态更新的安全性出现了OPTIMISTIC ROLLUPS 和ZK-ROLLUPS</p></li></ol><p></p><h2 level="2" id="OPTIMISTIC-ROLLUPS">OPTIMISTIC ROLLUPS：</h2><p>采用欺诈证明，缺省情况下假设ROLLUP对状态树根的更新是正确的。如果有人发现不对可发布证明上链，证明批次计算错误。而后智能合约验证状态更新确实存在错误就回滚。并且对提交欺诈者进行处罚。举报者进行奖励</p><ol><li><p>优点技术成熟，易于实现</p></li><li><p>缺点需要较长的退出挑战机制，挑战期长用户体验差 一般一至两周挑战期</p></li><li><p>要求社区里有猪狗多的挑战者来验证Rollup区块的合法性，并在挑战期前提交欺诈证明</p><p></p><h3 level="3" id="Optimism">Optimism</h3><ol><li><p>乐观认为数据正确</p></li><li><p>引入争议事件延迟机制(Dispute Time Delay,DTD)</p></li><li><p>使用挑战期保护数据正确性</p></li><li><p>为了防止ddos攻击，发起挑战也需要保证金</p></li></ol><h3 level="3" id="Arbitrum">Arbitrum：</h3><ol><li><p>L2 多轮交互式欺诈证明，和L1一步式证明</p></li><li><p>验证人和挑战者 在链下通过二分法不断拆分存在争议的步骤节点，直至最小化</p><p>再放到L1上验证，达到高效争端处理</p></li><li><p>缺点是：增加了交互次数 窗口交易期更长，需要原始提款人配合</p></li></ol></li></ol><p></p><h2 level="2" id="ZK-Rollup">ZK-Rollup：</h2><p>通过有效性证明。每个ROLLUPS提交时包含一个密码学证明。证明新状态根是执行状态交易后的结果，无论计算量多大都可以在链上快速验证。优势是安全性更高，劣势是所依赖的密码学证明很复杂。evm完全兼容不能</p><ol><li><p>利用零知识证明 保证交易有效性</p></li><li><p>安全依赖密码学原理，优点不存在挑战期</p></li><li><p>目前ZK通用计算能力较差，</p></li><li><p>与通用EVM兼容的扩容方案</p><p></p><h3 level="3" id="零知识证明">零知识证明：</h3><ol><li><p>证明者向验证者 证明一个陈述是正确的，而无需透露除该陈述是正确的之外的其他信息</p></li><li><p>证明者需要运行在专门的设备上，去信任化的</p></li><li><p>证明者prover：负责计算交易并把这些交易聚合成零知识证明</p></li><li><p>验证者validator/verifier：验证证明者提交的零知识证明的有效性</p></li></ol><p></p><h3 level="3" id="zk-snark特殊零知识证明">zk-snark:特殊零知识证明</h3><ol><li><p>非交互性，一次发送一个消息。简洁性，验证速度快存储空间小</p></li><li><p>证明者产生的工作量大，需要进行信任设置，随机元需要销毁</p></li></ol><p></p><h3 level="3" id="zk-sync采用的是zk-snark">zk-sync：采用的是zk-snark</h3><p></p><h3 level="3" id="starkWarezk-stark-是snark的升级">starkWare：zk-stark 是snark的升级</h3><p>具备透明性（无需信任设置），扩展性（更快生成证明），抗量子攻击（ ）</p></li></ol><script type="module">const injectHtml = (root, html) => {
  const iframe = document.createElement("iframe");
  const htmlContent = `<html><head></head><body>${html}</body></html>`;
  iframe.style.width = "100%";
  iframe.style.height = "100%";
  iframe.onload = () => {
    const doc = iframe.contentDocument || iframe.contentWindow?.document;
    if (!doc) {
      return;
    }
    doc.open();
    doc.write(htmlContent);
    doc.close();
  };
  root.replaceChildren(iframe);
}
  document.querySelectorAll('.playground')?.forEach(el=>{
    const html = el.getAttribute('data-html');
    if (html) {
      injectHtml(el,html);
    }
    const indicator = document.createElement("div");
    indicator.className = "indicator";
    const showCode = document.createElement("div");
    showCode.className = "show-code";
    showCode.innerText = "code";
    showCode.onclick = () => {
      el.parentElement.classList.remove("preview-only");
    };
    const showPreview = document.createElement("div");
    showPreview.className = "show-preview";
    showPreview.innerText = "preview";
    showPreview.onclick = () => {
      el.parentElement.classList.add("preview-only");
    };
    indicator.appendChild(showCode);
    indicator.appendChild(showPreview);
    el.parentElement.appendChild(indicator);
    if (window.screen.width < 768) {
      showPreview.click();
    }
  });</script></div> <div data-page-id="Web3-Notes-以太坊与Layer2" class="navigator flex justify-between items-center mt-4 py-4"> <a href="/post/Web3-Notes" class="flex items-center gap-1 text-blue cursor-pointer flex-[45%]"> <div class="i-ri:arrow-left-double-line w-5 h-5 flex-shrink-0"></div> <div class="text-start">Web3 Notes 密码学基础</div> </a> <a href="/post/Web3-Notes-智能合约" class="flex items-center justify-end gap-1 text-blue cursor-pointer flex-[45%]"> <div class="text-end">Web3 Notes 智能合约</div> <div class="i-ri:arrow-right-double-line w-5 h-5 flex-shrink-0"></div> </a> </div> </div> <div class="outline-wrapper"></div> </main>  <footer class="mt-8 flex justify-center"> <small class="w-full max-w-[720px] min-h-12 flex justify-center items-center opacity-80"> <a href="https://github.com/alucardzlh" target="_blank">© Alucardzlh</a> </small> </footer> </body></html>